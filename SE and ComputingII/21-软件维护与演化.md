# 21 软件维护与演化

## 1 维护

各个工程领域都会在将产品交付给用户之后进行维护工作：主要是为了保证产品的正常运转而进行使用帮助、故障解决和磨损处理等工作。

软件的维护主要是“修改”

* 软件不会磨损
* 软件维护只需要完成少量的使用帮助、故障解决和磨损处理等工作
* 软件特性上是易于修改的
* 软件只有持续修改才能保持价值

**软件维护的定义**：IEEE定义软件维护是在交付之后修改软件系统或其部件的活动过程，以修改缺陷、提高性能或者其他的属性、适应变化的环境

## 1.1 软件变更的常见场景

1. 问题发生了变化：随着时间的发展，形势可能会发生变化，导致用户的问题发生变化。这些使得软件的需求发生变化，出现新的需求，否则软件将减小甚至失去服务用户的作用
2. 环境发生了变化：随着软件产品的生命周期越来越长，在软件生存期内外界的环境发生变化的可能性越来越大，因此，软件经常需要修改以适应外界环境的改变
3. 软件产品中的缺陷：软件开发的理想结果当然是建立一个完全无缺陷的软件产品，但这是一个不可能达到的目标。最终的软件产品总是或多或少的会遗留下一些缺陷。当这些缺陷在使用中暴露出来的时候，必须给予及时的解决。

## 1.2 软件维护类型划分

1. 完善性维护（Perfective maintenance）：为了满足用户新的需求、增加软件功能而进行的软件修改活动。
2. 适应性维护（Adaptive maintenance）：为了使软件能够适应新的环境而进行的软件修改活动
3. 修正性维护（Corrective maintenance）：为了排除软件产品中遗留缺陷而进行的软件修改活动
4. 预防性维护（Preventive maintenance）：为了让软件产品在将来可维护，提升可维护性的软件修改活动

理想情况下，为了满足一些变更而执行的维护活动应该不会降低软件产品的质量，尤其是可维护性，否则，本次的维护活动将会使未来的维护活动更加困难。但是在实践中发现，软件维护活动弄的确会降低软件产品的质量，甚至导致一个软件产品在进行一系列维护活动之后会失去可维护性。[Lehman1980, 1984] 将这种现象表述为：在一个程序发生变更的时候，它的结构倾向于变得更加复杂，因此需要投入一些额外的资源以在保持功能的同时简化程序结构。**预防性维护**就是为了简化维护后的软件结构以提高软件可维护性的额外投入。

**软件维护的成本远远超过开发**，且从事软件维护工作的人员比率正在上升，维护的高代价主要是因为软件需求的频繁变更以及维护工作的困难所造成的，在软件维护过程中，需求的变更可能导致需要重新理解之前实现的程序（此时就体现了注释的重要性，好的注释能够减少理解程序的时间），或者需要分析此次维护改动对程序造成的影响

## 2 演化

## 3 软件维护与演化的技术