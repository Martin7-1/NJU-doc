# C++ Header File 

## 1 头文件的作用

​	C/C++编译器采用的是**分离编译模式**。在一个项目中，有多个源文件存在，但是它们总会有一些内容是相同的，如使用相同的用户自定义类型、使用了相同的全局变量等。因此，将这些内容抽取出来放到头文件中，然后在提供给各个源文件包含，就可以避免这些内容的重复书写，**提高编程效率和代码安全性**。

​	所以，设立头文件的目的主要是：**提供全局变量、全局函数的声明或提供公用数据类型的定义**，从而实现分离变异或代码复用。

​	在这里，有一个判断头文件中的内容是否合适的简单准则：**规范的头文件应该被多个源文件包含而不引发编译错误**。 头文件有如下三个作用：

1. <span style = 'color: red'>**加强类型检查，提高代码的类型安全性。**</span> 
	在C++中使用头文件，对自定义类型的安全也是非常重要的。虽然，在语法上，同一个数据类型（如一个class）在不同的源文件中书写多次是允许的，程序员认为他们是同一个自定义类型。但是，由于用户自定义类型不具有外部连接特性，编译器并不关心该类型的多个版本之间是否一致，这样会导致逻辑错误的发生。

2. <span style = 'color: red'>**减少代码的重复书写，提高编写和修改程序的效率。 **</span>
	在程序开发的过程中，对某些数据类型或者接口进行修改是难免的，使用头文件，只需要修改头文件中的内容，就可以保证修改在所有源文件中生肖，从而避免了繁琐易错的重复修改。

3. <span style = 'color: red'>**提供保密和代码重用的手段。**</span> 
	头文件也是C++代码虫蛹即只中不可缺少的一种手段，在很多场合，源代码不便（或不准）向用户公布，只要向用户提供头文件和二进制的库即可。用户只需要按照头文件的接口声明来调用库功能，而不必关心接口是怎么实现的，编译器会从库中提取相应的代码。



## 2 头文件的用法

### 2.1 头文件中的内容

​	设立头文件的目的主要是：提供全局变量、全局函数的声明或提供公用数据类型的定义，从而实现分离变异或代码复用。

因此，**下面的这些内容应该放在头文件中**：

1. 外部函数原型声明
2. 全局变量声明
3. 自己顶一顶额宏和类型等。

**下面这些内容不应该放在头文件中**：

1. 全局变量的定义
2. 外部变量的定义
3. 静态变量和静态函数的的定义
4. 在类体之外的类成员函数的定义等。

头文件应该包含和不应该包含什么内容，都是为了满足头文件被多个源文件包含而不引发编译错误。



### 2.2 使用系统提供的头文件

```cpp
// 使用系统提供的头文件时请使用尖括号<>
#include <iostream>

// 使用自己写的头文件时请使用引号""
#include "myIostream.h"
```



### 2.3避免头文件被重复包含

​	C++语言中的内容，有的在项目一级的范围内只能出现一次，如全局变量的定义、函数的定义等。有的可以在项目一级的范围出现多次，但在一个源文件中只能出现一次，如class的定义等；还有的在一个源文件中可以出现多次，如函数声明等。注意，项目一级可以理解为项目的所有源文件。由于事先无法无法确定头文件的内容，应该避免在一个源文件中对同一头文件包含多次，以免引起重定义错误。



**解决办法：**利用条件编译，在头文件的开始加上

```cpp
#ifndef HEADER_NAME
#define HEADER_NAME
```

在头文件的尾部加上

```cpp
#endif
```

HEADER_NAME指的是头文件的名称。条件编译指令 `#ifndef HEADER_NAME` 和 `#endif` 的意思是：如果条件编译标志HEADER_NAME没有定义的话，就编译#ifndef和#endif之间的程序段，否则就忽略它。

